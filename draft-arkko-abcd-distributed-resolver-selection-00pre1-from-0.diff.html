<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.34: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Darwin m36.nomadiclab.com 16.7.0 Darwin Kernel Version 16.7.0: Sun Jun  2 20:26:31 PDT 2019; root:xnu-3789.73.50~1/RELEASE_X86_64 x86_64 --> 
<!-- Using awk: /opt/local/bin/gawk: GNU Awk 5.0.0, API: 2.0 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 2.8.1 --> 
<!-- Using wdiff: /opt/local/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: draft-arkko-abcd-distributed-resolver-selection-00pre0.txt - draft-arkko-abcd-distributed-resolver-selection-00pre1.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;draft-arkko-abcd-distributed-resolver-selection-00pre0.txt&nbsp;</th><th> </th><th>&nbsp;draft-arkko-abcd-distributed-resolver-selection-00pre1.txt&nbsp;</th><th></th></tr> 
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Network Working Group                                           J. Arkko</td><td> </td><td class="right">Network Working Group                                           J. Arkko</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Internet-Draft                                                  Ericsson</td><td> </td><td class="right">Internet-Draft                                                  Ericsson</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Intended status: Informational                                M. Thomson</td><td> </td><td class="right">Intended status: Informational                                M. Thomson</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Expires: April <span class="delete">16</span>, 2020                                          Mozilla</td><td> </td><td class="rblock">Expires: April <span class="insert">25</span>, 2020                                          Mozilla</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               T. Hardie</td><td> </td><td class="right">                                                               T. Hardie</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  Google</td><td> </td><td class="right">                                                                  Google</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        October <span class="delete">14</span>, 2019</td><td> </td><td class="rblock">                                                        October <span class="insert">23</span>, 2019</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      Selecting Resolvers from a Set of Distributed DNS Resolvers</td><td> </td><td class="right">      Selecting Resolvers from a Set of Distributed DNS Resolvers</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            draft-arkko-abcd-distributed-resolver-selection</td><td> </td><td class="right">            draft-arkko-abcd-distributed-resolver-selection</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This memo discusses the use of a set of different DNS resolvers to</td><td> </td><td class="right">   This memo discusses the use of a set of different DNS resolvers to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reduce privacy problems related to resolvers learning the Internet</td><td> </td><td class="right">   reduce privacy problems related to resolvers learning the Internet</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   usage patterns of their clients.</td><td> </td><td class="right">   usage patterns of their clients.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> page 1, line 35</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> page 1, line 35</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   This Internet-Draft will expire on April <span class="delete">16</span>, 2020.</td><td> </td><td class="rblock">   This Internet-Draft will expire on April <span class="insert">25</span>, 2020.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Copyright (c) 2019 IETF Trust and the persons identified as the</td><td> </td><td class="right">   Copyright (c) 2019 IETF Trust and the persons identified as the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   carefully, as they describe your rights and restrictions with respect</td><td> </td><td class="right">   carefully, as they describe your rights and restrictions with respect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to this document.  Code Components extracted from this document must</td><td> </td><td class="right">   to this document.  Code Components extracted from this document must</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   include Simplified BSD License text as described in Section 4.e of</td><td> </td><td class="right">   include Simplified BSD License text as described in Section 4.e of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the Trust Legal Provisions and are provided without warranty as</td><td> </td><td class="right">   the Trust Legal Provisions and are provided without warranty as</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   described in the Simplified BSD License.</td><td> </td><td class="right">   described in the Simplified BSD License.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Table of Contents</td><td> </td><td class="right">Table of Contents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2</td><td> </td><td class="right">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   2.  Goals . . . . . . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">3</span></td><td> </td><td class="rblock">   2.  Goals <span class="insert">and Constraints</span> . . . . . . . . . . . . . . . . . . . .   <span class="insert">3</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   3.  Potential selection algorithms</span>  . . . . . . . . . . . . . . .   <span class="delete">4</span></td><td> </td><td class="rblock"><span class="insert">   3.  Query distribution algorithms</span> . . . . . . . . . . . . . . . .   <span class="insert">4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.1.  Client-based</span>  . . . . . . . . . . . . . . . . . . . . . .   5</td><td> </td><td class="rblock"><span class="insert">     3.1.  Client-based</span>  . . . . . . . . . . . . . . . . . . . . . .   <span class="insert">4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     3.2.  <span class="delete">Random</span>  . . . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">5</span></td><td> </td><td class="rblock"><span class="insert">       3.1.1.  Analysis of client-based selection  . . . . . . . . .   5</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.3.  Round-robin</span> . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">5</span></td><td> </td><td class="rblock"><span class="insert">       3.1.2.  Enhancements to client-based selection</span>  . . . . . . .   5</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.4.  Name-based</span>  . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">6</span></td><td> </td><td class="rblock">     3.2.  <span class="insert">Name-based</span>  . . . . . . . . . . . . . . . . . . . . . . .   <span class="insert">6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.5.  Suffix-based</span>  . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">6</span></td><td> </td><td class="rblock"><span class="insert">       3.2.1.  Name reduction</span>  . . . . . . . . . . . . . . . . . . .   <span class="insert">6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.6.  Early recommendations</span> . . . . . . . . . . . . . . . . . .   <span class="delete">6</span></td><td> </td><td class="rblock"><span class="insert">   4.  Effects of query distribution</span> . . . . . . . . . . . . . . . .   <span class="insert">7</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   4.</span>  Further work  . . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">7</span></td><td> </td><td class="rblock"><span class="insert">     4.1.  Caching considerations</span>  . . . . . . . . . . . . . . . . .   <span class="insert">7</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   5.  Acknowledgements</span>  . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">7</span></td><td> </td><td class="rblock"><span class="insert">     4.2.  Consistency considerations</span>  . . . . . . . . . . . . . . .   <span class="insert">7</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   6.</span>  Informative References  . . . . . . . . . . . . . . . . . . .   <span class="delete">7</span></td><td> </td><td class="rblock"><span class="insert">     4.3.  Resolver load distribution</span>  . . . . . . . . . . . . . . .   <span class="insert">7</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">8</span></td><td> </td><td class="rblock"><span class="insert">   5.  Poor distribution algorithms</span>  . . . . . . <span class="insert">. . . . . . . . . .   8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   6.</span>  Further work  . . . . . . . . . . . . . . . . . . . . . . . .   <span class="insert">8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   7.  References</span>  . . . . . . . . . . . . . . . . . . . . . . <span class="insert">. . .   8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     7.2.</span>  Informative References  . . . . . . . . . . . . . . . . .   <span class="insert">9</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     7.3.  URIs</span>  . . <span class="insert">. . . . . . . . . . . . . . . . . . . . . . . .   9</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Appendix A.  Acknowledgements . . . . . . . . . . . . . . . . . .   9</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   <span class="insert">9</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Internet communications are increasingly protected, by use of</span></td><td> </td><td class="rblock">   <span class="insert">The</span> DNS <span class="insert">protocol [DNS] provides no confidentiality;</span> and <span class="insert">therefore no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encryption [RFC8446], [RFC8484], [I-D.ietf-quic-transport],</span></td><td> </td><td class="rblock"><span class="insert">   privacy protections for queries.  Encryption</span> of DNS <span class="insert">transport between</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   [I-D.ietf-tls-esni].</span></td><td> </td><td class="rblock"><span class="insert">   stub and recursive</span> resolvers as <span class="insert">defined in [DOT] and [DOH] provides</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"><span class="insert">   confidentiality for DNS queries between</span> a <span class="insert">stub</span> and <span class="insert">a recursive</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   When a</span> DNS <span class="delete">client [RFC1035] uses a resolver service, that service</span></td><td> </td><td class="rblock"><span class="insert">   resolver.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   learns what applications the user is using, what web sites are</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   visited,</span> and <span class="delete">so on.  Even with the protection</span> of <span class="delete">communications,</span> DNS</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   resolvers <span class="delete">themselves remain</span> as a <span class="delete">persistent vulnerability with</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   respect to privacy as it is aware of both the client</span> and <span class="delete">their usage</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   patterns.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Leaking this information to the Internet infrastructure component</span></td><td> </td><td class="rblock">   <span class="insert">Recursive resolvers present</span> a <span class="insert">privacy dichotomy for clients.  A</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   such as</span> a <span class="delete">DNS</span> resolver <span class="delete">service can be problematic when the service is</span></td><td> </td><td class="rblock"><span class="insert">   recursive</span> resolver <span class="insert">that aggregates queries from multiple clients</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   not entirely trusted.  And even when the service is trusted and well</span></td><td> </td><td class="rblock"><span class="insert">   provides a measure</span> of <span class="insert">anonymity for those clients, both for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   maintained, legal and commercial pressures or surveillance activity</span></td><td> </td><td class="rblock"><span class="insert">   authoritative servers and from other observers on</span> the <span class="insert">network.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   may result in some</span> of the <span class="delete">information given</span> to <span class="delete">the service</span> to <span class="delete">be</span></td><td> </td><td class="rblock"><span class="insert">   Aggregating requests from multiple clients makes it difficult for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   misused, particularly when</span> a <span class="delete">service holds information for</span> a <span class="delete">large</span></td><td> </td><td class="rblock"><span class="insert">   these entities</span> to <span class="insert">correlate queries with specific clients.  The</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   number of users.  This is not desirable.</span></td><td> </td><td class="rblock"><span class="insert">   potential for a recursive</span> to <span class="insert">answer queries from cache further</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   improves this privacy advantage, while providing significant query</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   latency gains.  However, because the recursive resolver sees and can</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   record DNS queries, using</span> a <span class="insert">recursive resolver creates</span> a <span class="insert">privacy</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   exposure for clients.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Defending against privacy leaks for</span> DNS <span class="delete">queries</span> is <span class="delete">particularly</span></td><td> </td><td class="rblock">   <span class="insert">A client might decide to trust a particular recursive resolver with</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   important given</span> the <span class="delete">prevalence</span> of <span class="delete">pervasive</span> surveillance <span class="delete">efforts</span></td><td> </td><td class="rblock"><span class="insert">   information about</span> DNS <span class="insert">queries.  However, it</span> is <span class="insert">difficult or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   [RFC7258].</span></td><td> </td><td class="rblock"><span class="insert">   impossible to provide any guarantees about data handling practices in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   the <span class="insert">general case.  And even if a service can be trusted to respect</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   privacy with respect to handling</span> of <span class="insert">query data, legal and commercial</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   pressures or</span> surveillance <span class="insert">activity could result misuse of data.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Similarly, it is not possible to make any guarantees about attacks on</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   services.  For a service with many clients, these risks are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   particularly undesirable.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   This memo <span class="delete">discusses the use of a set of different</span> DNS resolvers to</td><td> </td><td class="rblock">   This memo <span class="insert">describes techniques for distributing</span> DNS <span class="insert">queries between</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   reduce <span class="delete">privacy problems related to</span> DNS <span class="delete">resolvers.  The architectural</span></td><td> </td><td class="rblock"><span class="insert">   multiple recursive</span> resolvers <span class="insert">from a known set.  The goal is</span> to reduce</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   principle followed here</span> is <span class="delete">one of attempting</span> to <span class="delete">avoid high-value</span></td><td> </td><td class="rblock">   <span class="insert">the amount of information that any signal</span> DNS <span class="insert">resolver</span> is <span class="insert">able</span> to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   targets</span> and the <span class="delete">concentration</span> of <span class="delete">any individual users's</span> information</td><td> </td><td class="rblock">   <span class="insert">gain</span> and <span class="insert">thereby reduce</span> the <span class="insert">amount</span> of <span class="insert">privacy-sensitive</span> information</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   in one place.  <span class="delete">We outline a number</span> of different <span class="delete">strategies for</span></td><td> </td><td class="rblock">   <span class="insert">that can be collected</span> in one place.  <span class="insert">The characteristics</span> of different</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   distributing queries to the different resolvers and analyze the</span></td><td> </td><td class="rblock">   <span class="insert">choices</span> are <span class="insert">examined.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   privacy and other impacts of those strategies.  Our observation is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that a simplistic models - such as a round-robin algorithm -</span> are <span class="delete">not</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   necessarily the best suited for this task.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The focus</span> of this <span class="delete">document</span> is <span class="delete">precisely only the choice of a resolver</span></td><td> </td><td class="rblock">   <span class="insert">An important outcome</span> of this <span class="insert">analysis</span> is <span class="insert">that simplistic methods</span> for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   from a known set.  There are many other worthwhile topics in the</span></td><td> </td><td class="rblock">   <span class="insert">distributing queries -</span> such as <span class="insert">a round-robin algorithm - have</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   general space of providing better confidentiality or privacy for DNS</span></td><td> </td><td class="rblock"><span class="insert">   considerably worse privacy characteristics than using a single</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   queries, or</span> for <span class="delete">operating encrypted DNS query services.  Topics</span> such</td><td> </td><td class="rblock"><span class="insert">   recursive resolver.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   as <span class="delete">resolver discovery, operational practices at any individial</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   resolver service, etc. are outside the scope of this memo.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The rest of this memo is organized as follows.  Section 2 specifies</td><td> </td><td class="right">   The rest of this memo is organized as follows.  Section 2 specifies</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the requirements that we would like such a distribution arrangement</td><td> </td><td class="right">   the requirements that we would like such a distribution arrangement</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to provide.  Section 3 discusses the different strategies, and makes</td><td> </td><td class="right">   to provide.  Section 3 discusses the different strategies, and makes</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   some early recommendations among the strategies.  Section <span class="delete">4</span> discusses</td><td> </td><td class="rblock">   some early recommendations among the strategies.  Section <span class="insert">6</span> discusses</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   potential further work in this area.</td><td> </td><td class="right">   potential further work in this area.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">2.  Goals</td><td> </td><td class="rblock">2.  Goals and <span class="insert">Constraints</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">There are many possible goals for building distributed services, with</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the most typical one being the ability to scale to be able to serve</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   large number of clients.  This memo is not focused on this aspect,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   but rather looks at distributing queries to different resolver</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   service providers to provide privacy benefits.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The background for looking at different service providers is that it</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is unlikely that there are significant difference with regards to</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   privacy issues within the same provider, even if its servers are</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   distributed in different locations.  Any technical vulnerabilities or</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   commercial objectives apply throughout such networks anyway,</span> and</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">government and surveillance activities seem to have extraterritorial</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   reach (see, e.g., [MSCVUS]).</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   As a result, the main privacy question is how to reduce information</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   learned by any individual resolver service provider through</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   distribution of queries from different clients.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Some of the basic goals that this distribution should achieve</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   include:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   o  Not concentrating information from all clients to a single</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      resolver service.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   o  Reducing the information given out regarding a single client to</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      any individual resolver service.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The latter goal can be broken further down to:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">o  Avoiding sending queries about the same destination</span> to different</td><td> </td><td class="rblock">   <span class="insert">This document aims</span> to <span class="insert">reduce the concentration of information about</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      services, <span class="delete">as otherwise the result is worse than not doing any</span></td><td> </td><td class="rblock"><span class="insert">   client activity by distributing DNS queries across</span> different <span class="insert">resolver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      distribution at all:</span> all the <span class="delete">different services will eventually</span></td><td> </td><td class="rblock">   services, <span class="insert">for</span> all <span class="insert">DNS queries in</span> the <span class="insert">aggregate and for DNS queries</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      get</span> the <span class="delete">same</span> information about <span class="delete">a particular client.</span></td><td> </td><td class="rblock"><span class="insert">   made by individual clients.  By distributing queries in this way,</span> the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">goal is to reduce the amount of</span> information <span class="insert">that any given DNS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolver service can acquire</span> about <span class="insert">client activity.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">o  Avoiding sending</span> queries <span class="delete">about related destinations</span></td><td> </td><td class="rblock">   <span class="insert">Any method for distributing</span> queries <span class="insert">from a single client needs</span> to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      (*.example.com)</span> to <span class="delete">different services, as otherwise</span> the <span class="delete">different</span></td><td> </td><td class="rblock">   <span class="insert">consider</span> the <span class="insert">risk of increasing</span> the <span class="insert">total amount of private</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      services will likely conclude that</span> the <span class="delete">client</span> is <span class="delete">using</span> the</td><td> </td><td class="rblock"><span class="insert">   information that</span> is <span class="insert">exposed by distributing queries - and associated</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      <span class="delete">"example.com" service anyway, regardless of</span> the <span class="delete">individual sub-</span></td><td> </td><td class="rblock"><span class="insert">   information - to multiple DNS resolvers.  In</span> the <span class="insert">extreme, any design</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      domains <span class="delete">accessed on specific requests.</span></td><td> </td><td class="rblock"><span class="insert">   that results in replicating</span> the <span class="insert">same query toward multiple services</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   would be a net privacy loss.  More subtle leaks arise as a result of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   distributing queries for sub-domains and even</span> domains <span class="insert">that are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   superficially unrelated, because these could share a commonality that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   might be exploited to link them.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">o</span>  For <span class="delete">browsers, avoiding sending</span> queries <span class="delete">about destinations on the</span></td><td> </td><td class="rblock">   For <span class="insert">instance, some web sites use names that are appear unrelated to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      same page (https://example.com pulls an image from</span></td><td> </td><td class="rblock"><span class="insert">   their primary name for hosting some kinds of content, like static</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      https://anotherexample.com)</span> to different <span class="delete">servers.  This is because</span></td><td> </td><td class="rblock"><span class="insert">   images or videos.  If</span> queries <span class="insert">for these unrelated names were sent</span> to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      there is a possibility of correlation</span> that <span class="delete">lets someone determine</span></td><td> </td><td class="rblock">   different <span class="insert">services,</span> that <span class="insert">effectively allows multiple resolvers to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      that the <span class="delete">user was on that page.</span></td><td> </td><td class="rblock"><span class="insert">   learn</span> that the <span class="insert">client accessed the web site.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">o  Otherwise, sending queries about different things</span> to <span class="delete">different</span></td><td> </td><td class="rblock">   <span class="insert">A distribution scheme also needs</span> to <span class="insert">consider stability of query</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      servers, to keep each server aware</span> of <span class="delete">minimal information</span> about a</td><td> </td><td class="rblock"><span class="insert">   routing over time.  A resolver can observve the absence</span> of <span class="insert">queries</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      <span class="delete">particular client.</span></td><td> </td><td class="rblock"><span class="insert">   and infer things</span> about <span class="insert">the state of</span> a <span class="insert">client cache, which can reveal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   that queries were made to other resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Some of these goals depend on which component in a system is</span></td><td> </td><td class="rblock">   The <span class="insert">need to limit replication of private information about queries</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   performing the queries.</span>  The <span class="delete">web page goal above can only be done by</span></td><td> </td><td class="rblock"><span class="insert">   eliminates simplistic distribution schemes, such as those discussed</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   browsers, whereas the other rules could also be implemented</span> in <span class="delete">an OS-</span></td><td> </td><td class="rblock">   in <span class="insert">Section 5.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   based resolver client.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Note that there are also other possible goals, e.g., around discovery</td><td> </td><td class="right">   Note that there are also other possible goals, e.g., around discovery</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of DNS servers (see, e.g.,</td><td> </td><td class="right">   of DNS servers (see, e.g.,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [I-D.schinazi-httpbis-doh-preference-hints]).  These goals are</td><td> </td><td class="right">   [I-D.schinazi-httpbis-doh-preference-hints]).  These goals are</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   outside the scope of this memo, as it is only concerned with</td><td> </td><td class="right">   outside the scope of this memo, as it is only concerned with</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   selection from a set of known servers.</td><td> </td><td class="right">   selection from a set of known servers.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.  <span class="delete">Potential selec</span>tion algorithms</td><td> </td><td class="rblock">3.  <span class="insert">Query distribu</span>tion algorithms</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This section introduces and analyzes several potential strategies for</td><td> </td><td class="right">   This section introduces and analyzes several potential strategies for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   distributing queries to different resolvers.  Each strategy is</td><td> </td><td class="right">   distributing queries to different resolvers.  Each strategy is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   formulated as an algorithm for choosing a resolver Ri from a set of n</td><td> </td><td class="right">   formulated as an algorithm for choosing a resolver Ri from a set of n</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resolvers R1, R2, ..., Rn.</td><td> </td><td class="right">   resolvers R1, R2, ..., Rn.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Note</span> that the <span class="delete">list</span> of <span class="delete">algorithms may grow in a future version</span> of <span class="delete">this</span></td><td> </td><td class="rblock">   <span class="insert">The designs presented in Section 3 assume</span> that the <span class="insert">stub resolver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   memo; this set is the initially analyzed set.</span></td><td> </td><td class="rblock"><span class="insert">   performing distribution</span> of <span class="insert">queries has varying degrees</span> of <span class="insert">contextual</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   information.  In general, more contextual information allows for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   finer-grained distribution of information between resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">3.1.  Client-based</td><td> </td><td class="right">3.1.  Client-based</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The simplest algorithm is to distribute each different client to a</td><td> </td><td class="right">   The simplest algorithm is to distribute each different client to a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   different resolver.  This reduces the number of users any particular</td><td> </td><td class="right">   different resolver.  This reduces the number of users any particular</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   service will know about.  However, <span class="delete">in order to function properly,</span></td><td> </td><td class="rblock">   service will know about.  However, this <span class="insert">does little</span> to <span class="insert">protect an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   this <span class="delete">methods needs</span> to <span class="delete">apply some kind</span> of <span class="delete">stable assignment mechanism,</span></td><td> </td><td class="rblock"><span class="insert">   individual user from the aggregation</span> of <span class="insert">information about queries at</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   e.g., a stable hash.</span></td><td> </td><td class="rblock"><span class="insert">   the selected resolver.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">One way of doing</span> this <span class="delete">is to hash</span> the <span class="delete">client's identity in</span> some</td><td> </td><td class="rblock">   <span class="insert">In</span> this <span class="insert">design clients select and consistently use</span> the <span class="insert">same resolver.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">manner:</span></td><td> </td><td class="rblock"><span class="insert">   This might be achieved by randomly selecting and remembering a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolver.  Alternatively, a resolver might be selected using</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   consistent hashing that takes</span> some <span class="insert">conception of client identity as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   input:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   i = h(client identity) % n</td><td> </td><td class="right">   i = h(client identity) % n</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Note that</span> the client <span class="delete">identity can (and should)</span> be <span class="delete">something that</span></td><td> </td><td class="rblock">   <span class="insert">For</span> the <span class="insert">purposes of this determination, a</span> client <span class="insert">might</span> be <span class="insert">an entire</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   remains private to the client itself;</span> the <span class="delete">resolver service need not</span></td><td> </td><td class="rblock"><span class="insert">   device, with the selection being made at</span> the <span class="insert">operating system level,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   be told about the identity, even if the client's concept of its own</span></td><td> </td><td class="rblock"><span class="insert">   or</span> it <span class="insert">could be a selection made by individual applications.  In the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   identity leads</span> it to <span class="delete">select</span> a <span class="delete">particular resolver service.  To avoid</span></td><td> </td><td class="rblock"><span class="insert">   extreme, an individual application might be able</span> to <span class="insert">partition its</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   disclosing DNS usage patterns</span> to <span class="delete">all resolvers, the identity needs</span> to</td><td> </td><td class="rblock"><span class="insert">   activities in</span> a <span class="insert">way that allows it</span> to <span class="insert">direct queries</span> to <span class="insert">multiple</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">be persistent information, perhaps obtained from the operating</span></td><td> </td><td class="rblock"><span class="insert">   resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   system, user account, hardware, or a random value chosen upon the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   first use of the application.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">While this algorithm satisfies the first overall goal in Section 2,</span></td><td> </td><td class="rblock"><span class="insert">3.1.1.  Analysis</span> of <span class="insert">client-based selection</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   it does nothing about splitting information regarding a particular</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   client to different services.  The only privacy benefit it provides</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is that it reduces the number</span> of <span class="delete">clients that each resolver service</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   provider has information about.  This may discourage attacking that</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   service, or forcing the service to give out information.  But for</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   each individual client, there is still some resolver service that</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   knows everything about the user's DNS usage patterns.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.  Random</span></td><td> </td><td class="rblock">   <span class="insert">Where different applications make independent resolver selections,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   activities that involve multiple applications can result in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   information about those activities being exposed to multiple</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolvers.  For instance, an application could open another</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   application for the purposes of handling a specific file type or to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   load a URL.  This could expose queries related to the activity as a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   whole to multiple resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Another simple algorithm is</span> a <span class="delete">random selection:</span></td><td> </td><td class="rblock">   <span class="insert">Even making different selections at the level of</span> a <span class="insert">device can result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   in replicating related information to multiple resolvers.  For</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   instance, an individual who uses a particular application on multiple</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   devices might perform similar activities on those devices, but have</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   DNS queries distributed to different resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">i = rand() % n</span></td><td> </td><td class="rblock">   <span class="insert">While this algorithm provides distribution of DNS queries in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   aggregate, it does little to divide information about a particular</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   client between resolvers.  It effectively only reduces the number of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   clients that each resolver can acquire information about.  This</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   provides systemic benefit, but does not provide individual clients</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   with any significant advantage as there is still some resolver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   service that has a complete view of the user's DNS usage patterns.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">This has the drawback of (over-time) providing information about all</span></td><td> </td><td class="rblock"><span class="insert">3.1.2.  Enhancements</span> to <span class="insert">client-based selection</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   clients</span> to <span class="delete">all services.  While this happens slowly, and does not</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   affect names that are not regularly visited, it still seems to be a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   serious problem in this approach.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.3.  Round-robin</span></td><td> </td><td class="rblock">   <span class="insert">Clients can break continuity of records by occasionally resetting</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   state so that a different resolver is selected.  A client might</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   choose to do this when it shuts down, or when it moves to a new</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   network location.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The clients can also choose</span> to <span class="delete">use a</span> new <span class="delete">resolver service either for</span></td><td> </td><td class="rblock">   <span class="insert">Breaking continuity is less effective if any state, in particular</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   every query</span> or <span class="delete">upon client boot:</span></td><td> </td><td class="rblock"><span class="insert">   cached results, is retained across the change.  If activities that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   depend on DNS querying are continued across the change then it might</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   be possible for the old resolver</span> to <span class="insert">make inferences about the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   activity on the</span> new <span class="insert">resolver,</span> or <span class="insert">the new resolver to make similar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   guesses about past activity.  As many modern applications provide</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   session continuity features across shutdowns and crashes, this can</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   mean that finding an appropriate point in time to perform a switch.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">i = counter++ % n</span></td><td> </td><td class="rblock"><span class="insert">3.2.  Name-based</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   This has largely the same downsides as the random algorithm.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.4.  Name-based</span></td><td> </td><td class="rblock">   <span class="insert">Clients might also additionally attempt to distribute queries based</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   on the name being queried.  This results in different names going to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   different resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The clients may distribute their queries based on the</span> name <span class="delete">being</span></td><td> </td><td class="rblock">   <span class="insert">A naive algorithm for</span> name <span class="insert">distribution uses the target</span> name <span class="insert">as input</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   queried.  This results in different names going to different</span></td><td> </td><td class="rblock">   to a <span class="insert">fixed hash:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   services, e.g., a social network</span> name <span class="delete">goes</span> to a <span class="delete">different service</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   than a search engine name:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   i = h(queried name) % n</td><td> </td><td class="right">   i = h(queried name) % n</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">This</span> approach <span class="delete">may also be extended</span> to <span class="delete">cover moving hosts by</span></td><td> </td><td class="rblock">   <span class="insert">However, this simplistic</span> approach <span class="insert">fails</span> to <span class="insert">prevent related queries</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   incorporating the public IP address of the host, such</span> that <span class="delete">when the</span></td><td> </td><td class="rblock"><span class="insert">   from being distributed to different resolvers in several ways.  For</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   host moves,</span> the <span class="delete">distribution changes.  For this to work</span> the <span class="delete">DNS</span> query</td><td> </td><td class="rblock"><span class="insert">   instance, queries</span> that <span class="insert">are executed after receiving a CNAME record in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">protocol must not be fingerprintable.  Similarly, one may also</span></td><td> </td><td class="rblock"><span class="insert">   a response will leak</span> the <span class="insert">same information as</span> the <span class="insert">original</span> query <span class="insert">that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   include</span> the <span class="delete">client id</span> as <span class="delete">in</span> the <span class="delete">Section 3.1 approach.  The full</span></td><td> </td><td class="rblock"><span class="insert">   resulted in</span> the <span class="insert">CNAME record.  Services that use related domain names</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   equation for all</span> of <span class="delete">these is:</span></td><td> </td><td class="rblock"><span class="insert">   - such</span> as <span class="insert">where "example.com" uses "static.example.com" or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   "cdn.example" - might reveal</span> the <span class="insert">use</span> of <span class="insert">the combined service to a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolver that receives a query for any associated name.  In both</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   cases, sensitive information is effectively replicated across</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   multiple resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   i = h(client identity|queried name|client public address) % </span>n</td><td> </td><td class="rblock"><span class="insert">3.2.1.  Name reductio</span>n</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">When</span> the <span class="delete">hash function only takes into account the name and nothing</span></td><td> </td><td class="rblock">   <span class="insert">In order to reduce</span> the <span class="insert">effect of distributing similar names to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   else,</span> different <span class="delete">clients will algorithmically arrive at</span> the <span class="delete">use of</span> the</td><td> </td><td class="rblock">   different <span class="insert">servers, a grouping mechanism might be used.  Leading</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">same resolver for</span> the <span class="delete">same names.  This</span> can be <span class="delete">undesirable.  When</span></td><td> </td><td class="rblock"><span class="insert">   labels in names might be erased before being input to</span> the <span class="insert">hashing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   address and identity information is used alongside</span> the <span class="delete">name, this is</span></td><td> </td><td class="rblock"><span class="insert">   algorithm.  This requires that</span> the <span class="insert">part of</span> the <span class="insert">suffix that is shared</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   no longer</span> a <span class="delete">problem.</span></td><td> </td><td class="rblock"><span class="insert">   between different services</span> can be <span class="insert">identified.  For</span> the <span class="insert">purposes of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ensuring that queries are consistently routed to the same resolver,</span> a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">weak signal is likely sufficient.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Note that any hash-based distribution to a set of resolvers may or</span></td><td> </td><td class="rblock">   <span class="insert">Several options for grouping</span> domain <span class="insert">names into equivalence sets might</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   may not distribute traffic to the resolvers equally.  For instance, a</span></td><td> </td><td class="rblock">   be <span class="insert">used:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   popular</span> domain <span class="delete">may get a lot of queries, but is just one name from</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the point of view of the hash.  Further work may</span> be <span class="delete">needed on this.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.5.  Suffix-based</span></td><td> </td><td class="rblock">   <span class="insert">o  The public suffix list [1] provides a manually curated list of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      shared domain suffixes.  Names can be reduced to include one label</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      more than the list allows, referred to as effective top-level</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      domain plus one (eTLD+1).  This reduces the number of cases where</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      queries for domains under the same administrative control are sent</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      to different resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A variant of the Section 3.4 approach is that one does not consider</span></td><td> </td><td class="rblock">   <span class="insert">o  Services often relies on multiple domain names across different</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the full name, but rather the main domain, i.e., example.com rather</span></td><td> </td><td class="rblock"><span class="insert">      eTLD+1 domains.  Developing equivalence sets might be needed to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   than www.example.com.  To do this, one can use</span> a <span class="delete">public suffix</span> list</td><td> </td><td class="rblock"><span class="insert">      avoid broadcasting queries to servers.  Mozilla maintains</span> a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   that <span class="delete">provides information about commonly</span> used <span class="delete">domain names.</span></td><td> </td><td class="rblock">      <span class="insert">manually curated equivalence</span> list <span class="insert">[2] for web sites</span> that <span class="insert">aims to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      maps the complete set of unrelated names</span> used <span class="insert">by services to a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      single service name.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The equation then becomes:</span></td><td> </td><td class="rblock">   <span class="insert">o  Other technologies, such as the proposed first party sets [3] or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      the abandoned DBOUND [DBOUND] provide domain owners a means to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      declare some form of equivalence for different names.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">i = h(client identity|organization suffix</span> of the <span class="delete">queried name|</span></td><td> </td><td class="rblock">   <span class="insert">Each</span> of <span class="insert">these techniques are potentially unreliable in different</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">         client public address) %  n</span></td><td> </td><td class="rblock"><span class="insert">   ways.  Additionally, these could skew</span> the <span class="insert">distribution of queries in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ways that might concentrate information on particular resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.6.  Early recommendations</span></td><td> </td><td class="rblock"><span class="insert">4.  Effects of query distribution</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The name- and suffix-based approaches seem</span> to <span class="delete">be</span> more <span class="delete">capable</span> than</td><td> </td><td class="rblock">   <span class="insert">Choosing</span> to <span class="insert">use</span> more than <span class="insert">one DNS resolver has broader implications</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">random- or round-robin -based approaches.</span></td><td> </td><td class="rblock"><span class="insert">   than just the effect on privacy.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">4.</span>  Further work</td><td> </td><td class="rblock"><span class="insert">4.1.  Caching considerations</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Using a common cache for multiple resolvers introduces the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   possibility that a resolver could learn about queries that were</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   originally directed to another resolvers by observing the absence of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   queries.  Though this can reduce caching performance, clients can</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   address this by having a per-resolver cache and only using the cache</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   for the selected resolver.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">4.2.  Consistency considerations</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Making the same query to multiple resolvers can result in different</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   answers.  For instance, DNS-based load balancing can lead to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   different answers being produced over time or for different query</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   origins.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   In the extreme, an application might encounter errors as a result of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   receiving incompatible answers, particularly if a server operator</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   (incorrectly) assumes that different DNS queries for the same client</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   always originate from the same source address.  This is most likely</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to occur if name-based selection is used, as queries could be related</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   based on information that the client does not consider.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">4.3.  Resolver load distribution</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Any selection of resolvers that is based on random inputs will need</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to account for available capacity on resolvers.  Otherwise, resolvers</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   with less available query-processing capacity will receive too high a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   proportion of all queries.  Clients only need to be informed of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   relative available capacity in order to make an appropriate</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   selection.  How relative capacities of resolvers are determined is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   not in scope for this document.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">5.  Poor distribution algorithms</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Random allocation to a resolver might be implemented:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   i = rand() % n</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Similar drawbacks can be seen where clients iterate over available</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolvers:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   i = counter++ % n</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Whether this choice is made on a per-query basis, these two methods</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   eventually provide information about all queries to all resolvers</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   over time.  Domain names are often queried many times over long</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   periods, so queries for the same domain name will eventually be</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   distributed to all resolvers.  Only one-off queries will avoid being</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   distributed.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Implementing either method at a much slower cadence might be</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   effective, subject to the constraints in Section 3.1.2.  This only</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   slows the distribution of information about repeated queries to all</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resolvers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">6.</span>  Further work</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   TBD</td><td> </td><td class="right">   TBD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">5.  Acknowledgement</span>s</td><td> </td><td class="rblock"><span class="insert">7.  Reference</span>s</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The authors would like to thank Christian Huitema, Ari Keranen, Mark</span></td><td> </td><td class="rblock"><span class="insert">7.1.  Normative References</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Nottingham, Stephen Farrell, Gonzalo Camarillo, Mirja Kuhlewind,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   David Allan, Daniel Migault and many others for interesting</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   discussions in this problem space.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">6.  Informative References</span></td><td> </td><td class="rblock">   <span class="insert">[DNS]      Mockapetris, P., "Domain names - implementation and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              specification", STD 13, RFC 1035, DOI 10.17487/RFC1035,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              November 1987, &lt;https://www.rfc-editor.org/info/rfc1035&gt;.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[I-D.ietf-quic-transport]</span></td><td> </td><td class="rblock">   <span class="insert">[DOH]      Hoffman, P.</span> and <span class="insert">P. McManus, "DNS Queries over HTTPS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              Iyengar, J.</span> and <span class="delete">M. Thomson, "QUIC: A UDP-Based Multiplexed</span></td><td> </td><td class="rblock"><span class="insert">              (DoH)", RFC 8484, DOI 10.17487/RFC8484, October 2018,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              and Secure Transport", draft-ietf-quic-transport-23 (work</span></td><td> </td><td class="rblock"><span class="insert">              &lt;https://www.rfc-editor.org/info/rfc8484&gt;.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              in progress), September 2019.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[I-D.ietf-tls-esni]</span></td><td> </td><td class="rblock">   <span class="insert">[DOT]      Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              Rescorla, E., Oku, K., Sullivan, N.,</span> and <span class="delete">C. Wood,</span></td><td> </td><td class="rblock">              and <span class="insert">P. Hoffman, "Specification</span> for <span class="insert">DNS over Transport</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              "Encrypted Server Name Indication</span> for <span class="delete">TLS 1.3", draft-</span></td><td> </td><td class="rblock"><span class="insert">              Layer Security (TLS)", RFC 7858, DOI 10.17487/RFC7858, May</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              ietf-tls-esni-04</span> (work in progress), <span class="delete">July</span> 2019.</td><td> </td><td class="rblock"><span class="insert">              2016, &lt;https://www.rfc-editor.org/info/rfc7858&gt;.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">7.2.  Informative References</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   [DBOUND]   Levine, J., "Publishing Organization Boundaries in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              DNS", draft-levine-dbound-dns-03</span> (work in progress), <span class="insert">April</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">              2019.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [I-D.schinazi-httpbis-doh-preference-hints]</td><td> </td><td class="right">   [I-D.schinazi-httpbis-doh-preference-hints]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Schinazi, D., Sullivan, N., and J. Kipp, "DoH Preference</td><td> </td><td class="right">              Schinazi, D., Sullivan, N., and J. Kipp, "DoH Preference</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Hints for HTTP", draft-schinazi-httpbis-doh-preference-</td><td> </td><td class="right">              Hints for HTTP", draft-schinazi-httpbis-doh-preference-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              hints-00 (work in progress), July 2019.</td><td> </td><td class="right">              hints-00 (work in progress), July 2019.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [MSCVUS]   Wikipedia, ., "Microsoft Corp. v. United States",</td><td> </td><td class="right">   [MSCVUS]   Wikipedia, ., "Microsoft Corp. v. United States",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              https://en.wikipedia.org/wiki/</td><td> </td><td class="right">              https://en.wikipedia.org/wiki/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Microsoft_Corp._v._United_States , n.d..</td><td> </td><td class="right">              Microsoft_Corp._v._United_States , n.d..</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[RFC1035]  Mockapetris, P., "Domain names - implementation and</span></td><td> </td><td class="rblock"><span class="insert">7.3.  URIs</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              specification", STD 13, RFC 1035, DOI 10.17487/RFC1035,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              November 1987, &lt;https://www.rfc-editor.org/info/rfc1035&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[RFC7258]  Farrell, S. and H. Tschofenig, "Pervasive Monitoring Is an</span></td><td> </td><td class="rblock">   <span class="insert">[1] https://publicsuffix.org/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              Attack", BCP 188, RFC 7258, DOI 10.17487/RFC7258, May</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              2014, &lt;https://www.rfc-editor.org/info/rfc7258&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol</span></td><td> </td><td class="rblock">   <span class="insert">[2] https://github.com/mozilla-services/shavar-prod-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,</span></td><td> </td><td class="rblock"><span class="insert">       lists/blob/master/disconnect-entitylist.json</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              &lt;https://www.rfc-editor.org/info/rfc8446&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">[RFC8484]  Hoffman, P.</span> and <span class="delete">P. McManus, "DNS Queries over HTTPS</span></td><td> </td><td class="rblock">   <span class="insert">[3] https://github.com/krgovind/first-party-sets</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              (DoH)", RFC 8484, DOI 10.17487/RFC8484, October 2018,</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              &lt;https://www.rfc-editor.org/info/rfc8484&gt;.</span></td><td> </td><td class="rblock"><span class="insert">Appendix A.  Acknowledgements</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The authors would like to thank Christian Huitema, Ari Keraenen, Mark</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Nottingham, Stephen Farrell, Gonzalo Camarillo, Mirja Kuehlewind,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   David Allan, Daniel Migault</span> and <span class="insert">many others for interesting</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   discussions in this problem space.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Authors' Addresses</td><td> </td><td class="right">Authors' Addresses</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Jari Arkko</td><td> </td><td class="right">   Jari Arkko</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Ericsson</td><td> </td><td class="right">   Ericsson</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Email: jari.arkko@piuha.net</td><td> </td><td class="right">   Email: jari.arkko@piuha.net</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Martin Thomson</td><td> </td><td class="right">   Martin Thomson</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Mozilla</td><td> </td><td class="right">   Mozilla</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 51 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>197 lines changed or deleted</i></th><th><i> </i></th><th><i>272 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.34. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
